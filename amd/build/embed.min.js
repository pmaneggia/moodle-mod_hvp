define ("mod_hvp/embed",["jquery","mod_hvp/communicator"],function($,H5PEmbedCommunicator){$(document).ready(function(){$(".h5p-iframe").ready(function(){initEmbedCommunicator=function initEmbedCommunicator(){var resizeDelay,instance=H5P.instances[0],parentIsFriendly=!1;H5PEmbedCommunicator.on("ready",function(){H5PEmbedCommunicator.send("hello")});H5PEmbedCommunicator.on("hello",function(){parentIsFriendly=!0;iFrame.contentDocument.body.style.overflow="hidden";document.body.classList.add("h5p-resizing");H5P.trigger(instance,"resize")});H5PEmbedCommunicator.on("resizePrepared",function(){H5PEmbedCommunicator.send("resize",{scrollHeight:iFrame.contentDocument.body.scrollHeight})});H5PEmbedCommunicator.on("resize",function(){H5P.trigger(instance,"resize")});H5P.on(instance,"resize",function(){if(H5P.isFullscreen){return}clearTimeout(resizeDelay);resizeDelay=setTimeout(function(){if(parentIsFriendly){H5PEmbedCommunicator.send("prepareResize",{scrollHeight:iFrame.contentDocument.body.scrollHeight,clientHeight:iFrame.contentDocument.body.clientHeight})}else{H5PEmbedCommunicator.send("hello")}},0)});H5P.trigger(instance,"resize")};var iFrame=document.querySelector(".h5p-iframe"),H5P=iFrame.contentWindow.H5P;if(!H5P||!H5P.instances||!H5P.instances[0]){console.warn("H5P embed.js: ACK! Embedded H5P.instances[0] in lowest iframe is not set up yet. Waiting for 'initialized' event");window.H5P.externalDispatcher.on("initialized",function(){console.log("H5P embed.js: 'initialized' event received");H5P=iFrame.contentWindow.H5P;initEmbedCommunicator()})}else{initEmbedCommunicator()}})})});
//# sourceMappingURL=embed.min.js.map
